import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, vsDark } from "@code-surfer/themes";

export const theme = vsDark;

# Hello ðŸ‘‹

This is an introduction to the [OFBiz Framework](https://cwiki.apache.org/confluence/display/OFBIZ/OFBiz+Tutorial+-+A+Beginners+Development+Guide)

---

<CodeSurfer>

```xml file=./snippets/controller.xml title="The controller" subtitle="The controller is the entry point to the application. It defines any links accessible by the browser."

```

```diff 8:12 title="Requests" subtitle="Requests are the actual \"links\" that the browser will access"
```

```diff 8[23:35] title="Request URIs" subtitle="By specifiying this property, the server will listen to requests to the \"/hr/control/EditEmployee\" URL"
```

```diff 8[23:35] title="Request URIs" subtitle="By specifiying this property, the server will listen to requests to the \"/hr/control/EditEmployee\" URL"
```

```diff 9 title="Security" subtitle="This tag defines if authentication is required for this request. This line should be there most of the time."
```

```diff 10[19:33],11[19:31],15[19:33],16[19:31],17[19:35] title="Response names" subtitle="Based on the state of the code executed during this request, the server can do different things (e.g. redirect to an error page if there was an error)"
```

</CodeSurfer>

---

## Controller Responses

We are going to explore the two most common response types

---

<CodeSurferColumns>

<Step>

```xml 1[30:41] title="Views" subtitle="Views are responses that usually return HTML. (they can also return PDFs, CSVs and other \"user-friendly\" outputs"
    <response name="success" type="view" value="EditEmployee"/>
```

```xml 1[30:44],2[28:42] title="Requests" subtitle="Requests are responses that return either raw data (json), or call a different request (directly, or by redirecting the user to one)"
    <response name="success" type="request" value="json"/>
    <response name="error" type="request" value="json"/>
```

</Step>

<Step>

```xml 3,7,8 subtitle="Views have a corresponding \"view-map\" at the end of the same controller.xml file that defines the type of view, and what will produce the output"
<request-map uri="EditEmployee">
    <security https="true" auth="true"/>
    <response name="success" type="view" value="EditEmployee"/>
    <response name="error" type="view" value="EditEmployeeError"/>
</request-map>

<view-map name="EditEmployee" type="screen"
        page="component://hr/widget/management/EmployeeScreens.xml#EditEmployee"/>
```

```xml 3:4 subtitle="Because these responses only return data, they have no \"view-map\" equivalents"
<request-map uri="saveEmployee">
    <security https="true" auth="true"/>
    <response name="success" type="request" value="json"/>
    <response name="error" type="request" value="json"/>
</request-map>
```

</Step>

</CodeSurferColumns>

---

Fin.
